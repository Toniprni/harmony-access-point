<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <!-- step 2:
     - it will create the package for data migration
     - run the migration procedure
     If this step fails the user could execute again: Step 1 and this step
    -->

    <!-- add migration package and execute it -->
    <changeSet id="EDELIVERY-7970" author="Catalin Enache">
        <sqlFile path="src/main/resources/db/migration/oracle/db-migration-package.sql" endDelimiter="\n/" dbms="oracle"/>
        <sql endDelimiter="\n/" dbms="oracle">
            BEGIN
                MIGRATE_42_TO_50.MIGRATE;
            END;
        </sql>

        <sqlFile path="src/main/resources/db/migration/mysql/db-migration-package.sql" endDelimiter="\n//" dbms="mysql"/>
        <sql dbms="mysql" endDelimiter="\n//">
DELIMITER //

CALL MIGRATE_42_TO_50_migrate
//
        </sql>
    </changeSet>
</databaseChangeLog>