<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <!-- step 4 (optional):
     - it is an optional step which will drop the original tables and the migration subprograms
     - it will drop OLD_* tables
     - it will drop migration subprograms

     All operations here are irreversible and should be done once step 1, step 2 and step 3 are successful (data in
     previous old tables will be lost in this step)
     -->
    <changeSet id="EDELIVERY-7970-4" author="Catalin Enache">
        <sql endDelimiter="\n/" dbms="oracle">
DROP TABLE OLD_TB_MESSAGING CASCADE CONSTRAINTS
/

PURGE TABLE OLD_TB_MESSAGING
/

DROP TABLE OLD_TB_ERROR_LOG CASCADE CONSTRAINTS
/

PURGE TABLE OLD_TB_ERROR_LOG
/

DROP TABLE OLD_TB_PARTY_ID CASCADE CONSTRAINTS
/

PURGE TABLE OLD_TB_PARTY_ID
/

DROP TABLE OLD_TB_RECEIPT_DATA CASCADE CONSTRAINTS
/

PURGE TABLE OLD_TB_RECEIPT_DATA
/

DROP TABLE OLD_TB_PROPERTY CASCADE CONSTRAINTS
/

PURGE TABLE OLD_TB_PROPERTY
/

DROP TABLE OLD_TB_PART_INFO CASCADE CONSTRAINTS
/

PURGE TABLE OLD_TB_PART_INFO
/

DROP TABLE OLD_TB_RAWENVELOPE_LOG CASCADE CONSTRAINTS
/

PURGE TABLE OLD_TB_RAWENVELOPE_LOG
/

DROP TABLE OLD_TB_ERROR CASCADE CONSTRAINTS
/

PURGE TABLE OLD_TB_ERROR
/

DROP TABLE OLD_TB_USER_MESSAGE CASCADE CONSTRAINTS
/

PURGE TABLE OLD_TB_USER_MESSAGE
/

DROP TABLE OLD_TB_SIGNAL_MESSAGE CASCADE CONSTRAINTS
/

PURGE TABLE OLD_TB_SIGNAL_MESSAGE
/

DROP TABLE OLD_TB_RECEIPT CASCADE CONSTRAINTS
/

PURGE TABLE OLD_TB_RECEIPT
/

DROP TABLE OLD_TB_MESSAGE_INFO CASCADE CONSTRAINTS
/

PURGE TABLE OLD_TB_MESSAGE_INFO
/

DROP TABLE OLD_TB_MESSAGE_LOG CASCADE CONSTRAINTS
/

PURGE TABLE OLD_TB_MESSAGE_LOG
/

DROP TABLE OLD_TB_MESSAGE_ACKNW CASCADE CONSTRAINTS
/

PURGE TABLE OLD_TB_MESSAGE_ACKNW
/

DROP TABLE OLD_TB_MESSAGE_FRAGMENT CASCADE CONSTRAINTS
/

PURGE TABLE OLD_TB_MESSAGE_FRAGMENT
/

DROP TABLE OLD_TB_MESSAGE_GROUP CASCADE CONSTRAINTS
/

PURGE TABLE OLD_TB_MESSAGE_GROUP
/

DROP TABLE OLD_TB_MESSAGE_HEADER CASCADE CONSTRAINTS
/

PURGE TABLE OLD_TB_MESSAGE_HEADER
/

DROP PACKAGE MIGRATE_42_TO_50
/


DROP PACKAGE MIGRATE_42_TO_50_date_time_to_utc
/

        </sql>

        <sql dbms="mysql" endDelimiter="\n//">
DELIMITER //

DROP TABLE OLD_TB_MESSAGING
//

DROP TABLE OLD_TB_ERROR_LOG
//

DROP TABLE OLD_TB_PARTY_ID
//

DROP TABLE OLD_TB_RECEIPT_DATA
//

DROP TABLE OLD_TB_PROPERTY
//

DROP TABLE OLD_TB_PART_INFO
//

DROP TABLE OLD_TB_RAWENVELOPE_LOG
//

DROP TABLE OLD_TB_ERROR
//

DROP TABLE OLD_TB_USER_MESSAGE
//

DROP TABLE OLD_TB_SIGNAL_MESSAGE
//

DROP TABLE OLD_TB_RECEIPT
//

DROP TABLE OLD_TB_MESSAGE_INFO
//

DROP TABLE OLD_TB_MESSAGE_LOG
//

DROP TABLE OLD_TB_MESSAGE_ACKNW
//

DROP TABLE OLD_TB_MESSAGE_FRAGMENT
//

DROP TABLE OLD_TB_MESSAGE_GROUP
//

DROP TABLE OLD_TB_MESSAGE_HEADER
//

DROP FUNCTION IF EXISTS MIGRATE_42_TO_50_check_table_exists
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_clean_existing_tables
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_trace
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_log_verbose
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_drop_table_if_exists
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_truncate_or_create_table
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_check_counts
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_get_tb_d_mpc_rec
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_get_tb_d_role_rec
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_get_tb_d_msh_role_rec
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_get_tb_d_service_rec
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_get_tb_d_msg_status_rec
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_get_tb_d_agreement_rec
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_get_tb_d_action_rec
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_get_tb_d_party_rec
//

DROP FUNCTION IF EXISTS MIGRATE_42_TO_50_get_msg_subtype
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_get_tb_d_notif_status_rec
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_get_tb_user_message_rec
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_get_tb_signal_message_rec
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_get_tb_d_msg_property_rec
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_get_tb_d_part_property_rec
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_migrate_user_message
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_migrate_message_fragment
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_migrate_message_group
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_migrate_message_header
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_migrate_signal_receipt
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_migrate_raw_envelope_log
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_migrate_message_log
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_migrate_property
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_migrate_part_info_user
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_migrate_part_info_property
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_migrate_error_log
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_migrate_message_acknw
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_migrate
//

DROP PROCEDURE IF EXISTS MIGRATE_42_TO_50_date_time_to_utc
//
        </sql>
    </changeSet>
</databaseChangeLog>